(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{248:(e,t,s)=>{"use strict";s.d(t,{K:()=>r});class a{async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.getAuthToken();if(!s)return{success:!1,error:"No authentication token found"};let a="".concat(this.baseUrl).concat(e),r={"Content-Type":"application/json",Authorization:"Bearer ".concat(s),...t.headers};try{let e=await fetch(a,{...t,headers:r}),s=await e.json();if(!e.ok)return{success:!1,error:s.error||"HTTP ".concat(e.status,": ").concat(e.statusText)};return{success:!0,data:s}}catch(e){return console.error("API request failed:",e),{success:!1,error:e instanceof Error?e.message:"Network error"}}}async getSubmissions(e){let t=new URLSearchParams;(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.append("offset",e.offset.toString());let s="/submissions".concat(t.toString()?"?".concat(t.toString()):"");return this.makeRequest(s)}async getSubmission(e){return this.makeRequest("/submissions/".concat(e))}async updateSubmission(e,t){return this.makeRequest("/submissions/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async getProfile(){return this.makeRequest("/profile")}isAuthenticated(){return null!==this.getAuthToken()}getToken(){return this.getAuthToken()}constructor(){this.baseUrl="/api",this.getAuthToken=()=>{let e=localStorage.getItem("authToken");if(e)try{return JSON.parse(e).token||e}catch(t){return e}return null}}}let r=new a},969:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s(2507);s(3643);var r=s(144),n=s(5687);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...r})}},1266:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var a=s(2507),r=s(3643),n=s(3876),i=s(144),l=s(5687);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,l.cn)(o(),s),...r})});c.displayName=n.b.displayName},1516:(e,t,s)=>{Promise.resolve().then(s.bind(s,3534))},3034:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>l});var a=s(2507),r=s(3643),n=s(5687);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},3210:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var a=s(2507),r=s(3643),n=s(5687);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});i.displayName="Textarea"},3534:(e,t,s)=>{"use strict";s.d(t,{SubmissionReview:()=>es});var a=s(2507),r=s(3643),n=s(6756),i=s(4981),l=s(6695),o=s(4982),c=s(7983),d=s(4161),u=s(8290),m=s(7151),x=s(9478),h=s(8395),f=s(9744),g=s(2875),p=s(6414),v=s(7463),j=s(3096),N=s(969),b=s(8248),y=s(3034),w=s(1266),S=s(8381),A=s(9251),T=s(3210),E=s(6490),C=s(9668),k=s(8253),R=s(144),D=s(2158),O=s(5687);let I=k.Kq,V=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(k.LM,{ref:t,className:(0,O.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...r})});V.displayName=k.LM.displayName;let F=(0,R.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),W=r.forwardRef((e,t)=>{let{className:s,variant:r,...n}=e;return(0,a.jsx)(k.bL,{ref:t,className:(0,O.cn)(F({variant:r}),s),...n})});W.displayName=k.bL.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(k.rc,{ref:t,className:(0,O.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...r})}).displayName=k.rc.displayName;let B=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(k.bm,{ref:t,className:(0,O.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...r,children:(0,a.jsx)(D.A,{className:"h-4 w-4"})})});B.displayName=k.bm.displayName;let P=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(k.hE,{ref:t,className:(0,O.cn)("text-sm font-semibold",s),...r})});P.displayName=k.hE.displayName;let J=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(k.VY,{ref:t,className:(0,O.cn)("text-sm opacity-90",s),...r})});function L(){let{toasts:e}=(0,C.dj)();return(0,a.jsxs)(I,{children:[e.map(function(e){let{id:t,title:s,description:r,action:n,...i}=e;return(0,a.jsxs)(W,{...i,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[s&&(0,a.jsx)(P,{children:s}),r&&(0,a.jsx)(J,{children:r})]}),n,(0,a.jsx)(B,{})]},t)}),(0,a.jsx)(V,{})]})}J.displayName=k.VY.displayName;var _=s(4877),M=s(9221),U=s(6363),H=s(5853);let Y="CBS3QODERORJH4GPDAWNQMUNTB4O6LO6NUETRXE5H2NSR3G542QOWKTN",z=H.Networks.TESTNET;class Z{async initialize(){try{return console.log("✅ Stellar Contract Service initialized"),!0}catch(e){return console.error("❌ Failed to initialize Stellar contract service:",e),!1}}createTrufaMetadata(e){return{...e,decisionAt:new Date().toISOString(),metadataHash:this.generateMetadataHash(e)}}generateMetadataHash(e){let t=JSON.stringify(e,Object.keys(e).sort()),s=0;for(let e=0;e<t.length;e++)s=(s<<5)-s+t.charCodeAt(e),s&=s;return Math.abs(s).toString(16)}async submitValidationToSoroban(e){let{adminSecret:t,adminPublic:s,metadata:a}=e,r=new Date().toISOString();console.log("[".concat(r,"] [SorobanContract] Attempting contract call")),console.log("  Admin wallet: ".concat(s)),console.log("  Submission ID: ".concat(a.submissionId)),console.log("  Metadata:",a);try{let e=H.Keypair.fromSecret(t),r=await this.server.getAccount(s),n=(0,H.nativeToScVal)(a.submissionId,{type:"symbol"}),i=new H.TransactionBuilder(r,{fee:H.BASE_FEE,networkPassphrase:z}).addOperation(this.contract.callOperation("submit_validation",n,(0,H.nativeToScVal)(JSON.stringify(a),{type:"string"}))).setTimeout(30).build();i.sign(e);try{let e=await this.server.sendTransaction(i);return console.log("[".concat(new Date().toISOString(),"] [SorobanContract] SUCCESS (symbol)")),console.log("  Tx hash: ".concat(e.hash)),{success:!0,transactionHash:e.hash,metadata:e}}catch(i){console.warn("[".concat(new Date().toISOString(),"] [SorobanContract] Symbol call failed, trying bytes. Error:"),i);let t=(0,H.nativeToScVal)(a.submissionId,{type:"bytes"}),s=new H.TransactionBuilder(r,{fee:H.BASE_FEE,networkPassphrase:z}).addOperation(this.contract.callOperation("submit_validation",t,(0,H.nativeToScVal)(JSON.stringify(a),{type:"string"}))).setTimeout(30).build();s.sign(e);let n=await this.server.sendTransaction(s);return console.log("[".concat(new Date().toISOString(),"] [SorobanContract] SUCCESS (bytes)")),console.log("  Tx hash: ".concat(n.hash)),{success:!0,transactionHash:n.hash,metadata:n}}}catch(e){return console.error("[".concat(new Date().toISOString(),"] [SorobanContract] ERROR")),console.error(e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getValidation(e){try{console.log("\uD83D\uDD0D Fetching validation for submission:",e);let t={submissionId:e,status:"APPROVED",timestamp:new Date().toISOString(),contractAddress:Y};return{success:!0,metadata:t}}catch(e){return console.error("❌ Failed to get validation:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async verifyAdminWallet(e){try{console.log("\uD83D\uDD10 Verifying admin wallet:",e);let t=["GCKFBEIYTKP6RJGWLOUQBCGWDLNVTQJDKB7NQIU7SFJBQYDVD5GQJJQJ"].includes(e);return console.log("\uD83D\uDD10 Admin verification result:",t),t}catch(e){return console.error("❌ Failed to verify admin wallet:",e),!1}}async getContractStats(){try{console.log("\uD83D\uDCCA Fetching contract statistics...");let e={totalValidations:0,approvedValidations:0,rejectedValidations:0,contractAddress:Y,lastUpdated:new Date().toISOString()};return{success:!0,metadata:e}}catch(e){return console.error("❌ Failed to get contract stats:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getTransactionStatus(e){try{console.log("\uD83D\uDD0D Checking transaction status:",e);let t={hash:e,status:"SUCCESS",ledger:"mock_ledger",timestamp:new Date().toISOString()};return{success:!0,metadata:t}}catch(e){return console.error("❌ Failed to get transaction status:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}constructor(){this.server=new H.Server("https://soroban-testnet.stellar.org:443",{allowHttp:!1}),this.contract=new H.Contract(Y)}}let G=new Z;G.initialize().then(e=>{console.log("Stellar Contract Service initialized:",e)}).catch(e=>{console.error("Failed to initialize Stellar Contract Service:",e)});let K=[{address:"GAAKZ5PTQ7YLHTWQJQWEPAFOHEYFADEPB4DCBE4JWT63JCYJTCGULCAC",name:"Forecast",role:"SUPER_ADMIN",permissions:["approve","reject","review","manage_users","view_stats"],isActive:!0},{address:"GDGYOBHJVNGVBCIHKDR7H6NNYRSPPK2TWANH6SIY34DJLSXUOJNXA2SN",name:"Whitelist 1",role:"VALIDATOR",permissions:["approve","reject","review"],isActive:!0},{address:"GCLASRLEFVHLLYHIMTAC36E42OTZPKQDAL52AEKBVTIWNPVEC4GXMAFG",name:"Whitelist 2",role:"VALIDATOR",permissions:["approve","reject","review"],isActive:!0},{address:"GC6GCTEW7Y4GA6DH7WM26NEKSW4RPI3ZVN6E3FLW3ZVNILKLV77I43BK",name:"User 1",role:"VALIDATOR",permissions:["approve","reject","review"],isActive:!0},{address:"GCGZFA2PFQYHPGWCOL36J7DXQ3O3TFNIN24QAQ7J4BWQYH6OIGA7THOY",name:"User 2",role:"VALIDATOR",permissions:["approve","reject","review"],isActive:!0}];class Q{isAdminWallet(e){return K.some(t=>t.address===e&&t.isActive)}getAdminWallet(e){return K.find(t=>t.address===e&&t.isActive)||null}hasPermission(e,t){let s=this.getAdminWallet(e);return!!s&&s.permissions.includes(t)}getActiveAdmins(){return K.filter(e=>e.isActive)}getAdminsByRole(e){return K.filter(t=>t.role===e&&t.isActive)}addAdminWallet(e){let t={...e,isActive:!0};K.push(t)}deactivateAdminWallet(e){let t=K.find(t=>t.address===e);return!!t&&(t.isActive=!1,!0)}getAdminStats(){let e=this.getActiveAdmins();return{totalAdmins:e.length,superAdmins:e.filter(e=>"SUPER_ADMIN"===e.role).length,validators:e.filter(e=>"VALIDATOR"===e.role).length,reviewers:e.filter(e=>"REVIEWER"===e.role).length}}}let $=new Q;var q=s(248),X=s(9415);let ee={pending:"bg-yellow-100 text-yellow-800 border-yellow-200","under review":"bg-blue-100 text-blue-800 border-blue-200",approved:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",draft:"bg-gray-100 text-gray-800 border-gray-200"},et=U.Ik({email:U.Yj().email("Invalid email address"),name:U.Yj().min(2,"Name must be at least 2 characters"),dateOfBirth:U.Yj().regex(/^\d{4}-\d{2}-\d{2}$/,"Invalid date format (YYYY-MM-DD)"),documentType:U.k5(["passport","id_card","drivers_license"],{required_error:"Please select a document type"}),documentNumber:U.Yj().min(5,"Document number must be at least 5 characters"),notes:U.Yj().optional()});function es(e){let{submissionId:t,onBack:s}=e,{toast:k}=(0,C.dj)(),R=(0,X.useSearchParams)(),[D,O]=(0,r.useState)(null),[I,V]=(0,r.useState)(!0),[F,W]=(0,r.useState)(null),[B,P]=(0,r.useState)({technical:[75],regulatory:[80],financial:[70],environmental:[85]}),[J,U]=(0,r.useState)(""),[H,Y]=(0,r.useState)(null),[z,Z]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(!1),[es,ea]=(0,r.useState)(""),[er,en]=(0,r.useState)(null),[ei,el]=(0,r.useState)(!1),[eo,ec]=(0,r.useState)(null),[ed,eu]=(0,r.useState)(!1),[em,ex]=(0,r.useState)(!1),[eh,ef]=(0,r.useState)(""),eg=t||R.get("id")||"";(0,r.useEffect)(()=>{(async()=>{if(!eg){W("No submission ID provided"),V(!1);return}try{if(V(!0),W(null),!q.K.isAuthenticated()){W("Authentication required");return}let e=await q.K.getSubmission(eg);if(e.success&&e.data){if(O(e.data),e.data.adminScore){let t=e.data.adminScore;P({technical:[t],regulatory:[t],financial:[t],environmental:[t]})}e.data.adminNotes&&U(e.data.adminNotes)}else W(e.error||"Failed to fetch submission"),k({title:"Error",description:e.error||"Failed to fetch submission",variant:"destructive"})}catch(t){let e=t instanceof Error?t.message:"Unknown error";W(e),k({title:"Error",description:e,variant:"destructive"})}finally{V(!1)}})()},[eg,k]),(0,r.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("stellarPublicKey");if(e){var t;ef(e),eu(!0);let s=$.isAdminWallet(e);ex(s),console.log("Wallet status:",{address:e,isConnected:!0,isAdmin:s,permissions:null===(t=$.getAdminWallet(e))||void 0===t?void 0:t.permissions})}};e();let t=()=>{e()};return window.addEventListener("walletStateChange",t),window.addEventListener("storage",t),()=>{window.removeEventListener("walletStateChange",t),window.removeEventListener("storage",t)}},[]);let ep=Math.round(Object.values(B).reduce((e,t)=>e+t[0],0)/4);(0,M.mN)({resolver:(0,_.u)(et),defaultValues:{email:"",name:"",dateOfBirth:"",documentType:void 0,documentNumber:"",notes:""}});let ev=async()=>{if(!ed||!em||null===H||!D){k({title:"Cannot Submit",description:"Please connect an admin wallet and make a decision before submitting.",variant:"destructive"});return}Z(!0);try{console.log("\uD83D\uDE80 Starting validation submission...");let e=await q.K.updateSubmission(D.id,{adminScore:ep,adminNotes:J,adminDecision:H?"approved":"rejected",adminDecisionAt:new Date().toISOString(),status:H?"approved":"rejected"});if(!e.success)throw Error(e.error||"Failed to update submission");let t=G.createTrufaMetadata({submissionId:D.id,deviceName:D.deviceName,deviceType:D.deviceType,operatorWallet:D.operatorWallet,validatorWallet:eh,trufaScores:{technical:B.technical[0],regulatory:B.regulatory[0],financial:B.financial[0],environmental:B.environmental[0],overall:ep},decision:H?"APPROVED":"REJECTED"});console.log("\uD83D\uDCCB Created metadata:",t);let s=localStorage.getItem("stellarSecretKey");if(s||(s=prompt("Enter your admin Stellar secret key to sign the transaction:")||""),!s){k({title:"Missing Secret Key",description:"Admin secret key is required to sign the transaction.",variant:"destructive"}),Z(!1);return}let a=await G.submitValidationToSoroban({adminSecret:s,adminPublic:eh,metadata:t});a.success?a.transactionHash&&(ea(a.transactionHash),Q(!0),en("pending"),k({title:"Metadata successfully pushed to Stellar \uD83D\uDE80",description:"Transaction is being processed on the network"})):k({title:"Contract Submission Failed",description:a.error||"Unknown error",variant:"destructive"})}catch(e){k({title:"Submission Error",description:e instanceof Error?e.message:"Unknown error",variant:"destructive"})}finally{Z(!1)}},ej=async()=>{await navigator.clipboard.writeText(es),el(!0),setTimeout(()=>el(!1),2e3)},eN=ed&&em&&null!==H&&!K;return I?(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{children:"Loading submission details..."})]})}):F||!D?(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsxs)(E.Fc,{variant:"destructive",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)(E.TN,{children:F||"Submission not found"})]}),s&&(0,a.jsxs)(b.$,{variant:"outline",className:"mt-4",onClick:s,children:[(0,a.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Back to Inbox"]})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(L,{}),(0,a.jsx)("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50",children:(0,a.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[s&&(0,a.jsxs)(b.$,{variant:"ghost",size:"sm",onClick:s,children:[(0,a.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Back to Inbox"]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:D.deviceName}),(0,a.jsx)(N.E,{className:ee[D.status],children:D.status.replace("-"," ")}),(0,a.jsxs)(N.E,{variant:"outline",className:"gap-1",children:[(0,a.jsx)(o.A,{className:"h-3 w-3"}),"TRUFA: ",ep]})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[D.id," • Submitted by ",D.operatorWallet.slice(0,8),"...",D.operatorWallet.slice(-8)," on"," ",new Date(D.submittedAt).toLocaleDateString()]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:ed?(0,a.jsxs)(N.E,{variant:"outline",className:"gap-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),(0,a.jsx)(c.A,{className:"h-3 w-3"}),"Connected"]}):(0,a.jsxs)(N.E,{variant:"outline",className:"gap-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),(0,a.jsx)(c.A,{className:"h-3 w-3"}),"Disconnected"]})})]})})}),(0,a.jsx)("div",{className:"container mx-auto px-6 py-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(y.Zp,{children:[(0,a.jsx)(y.aR,{children:(0,a.jsx)(y.ZB,{children:"Device Overview"})}),(0,a.jsxs)(y.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(w.J,{className:"text-xs font-medium text-muted-foreground",children:"Device Type"}),(0,a.jsx)("p",{className:"font-medium",children:D.deviceType})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.J,{className:"text-xs font-medium text-muted-foreground",children:"Manufacturer"}),(0,a.jsx)("p",{className:"font-medium",children:D.manufacturer})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.J,{className:"text-xs font-medium text-muted-foreground",children:"Model"}),(0,a.jsx)("p",{className:"font-medium",children:D.model})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.J,{className:"text-xs font-medium text-muted-foreground",children:"Serial Number"}),(0,a.jsx)("p",{className:"font-medium",children:D.serialNumber})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.J,{className:"text-xs font-medium text-muted-foreground",children:"Year of Manufacture"}),(0,a.jsx)("p",{className:"font-medium",children:D.yearOfManufacture})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.J,{className:"text-xs font-medium text-muted-foreground",children:"Condition"}),(0,a.jsx)("p",{className:"font-medium",children:D.condition})]})]}),(0,a.jsx)(S.w,{className:"my-4"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.J,{className:"text-xs font-medium text-muted-foreground",children:"Specifications"}),(0,a.jsx)("p",{className:"text-sm leading-relaxed mt-1",children:D.specifications})]})]})]}),(0,a.jsxs)(y.Zp,{children:[(0,a.jsxs)(y.aR,{children:[(0,a.jsxs)(y.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),"Financial Information"]}),(0,a.jsx)(y.BT,{children:"Device financial metrics and projections"})]}),(0,a.jsx)(y.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(w.J,{className:"text-xs font-medium text-muted-foreground",children:"Purchase Price"}),(0,a.jsxs)("p",{className:"font-medium",children:["$",Number(D.purchasePrice).toLocaleString()]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.J,{className:"text-xs font-medium text-muted-foreground",children:"Current Value"}),(0,a.jsxs)("p",{className:"font-medium",children:["$",Number(D.currentValue).toLocaleString()]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.J,{className:"text-xs font-medium text-muted-foreground",children:"Expected Revenue"}),(0,a.jsxs)("p",{className:"font-medium",children:["$",Number(D.expectedRevenue).toLocaleString()]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.J,{className:"text-xs font-medium text-muted-foreground",children:"Operational Costs"}),(0,a.jsxs)("p",{className:"font-medium",children:["$",Number(D.operationalCosts).toLocaleString()]})]})]})})]}),(0,a.jsxs)(y.Zp,{children:[(0,a.jsxs)(y.aR,{children:[(0,a.jsxs)(y.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-5 w-5"}),"Documentation"]}),(0,a.jsx)(y.BT,{children:"Review submitted device documents"})]}),(0,a.jsx)(y.Wu,{children:D.files.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:D.files.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"truncate",children:e.filename}),(0,a.jsx)(b.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsx)("a",{href:"/uploads/".concat(e.path),target:"_blank",rel:"noopener noreferrer",title:"View ".concat(e.filename),children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})}),(0,a.jsx)(b.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsx)("a",{href:"/uploads/".concat(e.path),target:"_blank",rel:"noopener noreferrer",title:"Download ".concat(e.filename),children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})})]},t))}):(0,a.jsx)("p",{className:"text-muted-foreground",children:"No documents uploaded"})})]}),(0,a.jsxs)(y.Zp,{children:[(0,a.jsxs)(y.aR,{children:[(0,a.jsx)(y.ZB,{children:"Reviewer Notes"}),(0,a.jsx)(y.BT,{children:"Add your validation comments and observations"})]}),(0,a.jsx)(y.Wu,{children:(0,a.jsx)(T.T,{placeholder:"Enter your detailed review notes, concerns, or recommendations...",value:J,onChange:e=>U(e.target.value),rows:6,className:"resize-none"})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(y.Zp,{children:[(0,a.jsxs)(y.aR,{children:[(0,a.jsx)(y.ZB,{children:"TRUFA Scoring"}),(0,a.jsx)(y.BT,{children:"Evaluate across key criteria"})]}),(0,a.jsxs)(y.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(w.J,{className:"text-sm",children:"Technical Feasibility"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:B.technical[0]})]}),(0,a.jsx)(A.A,{value:B.technical,onValueChange:e=>P(t=>({...t,technical:e})),max:100,step:5,className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(w.J,{className:"text-sm",children:"Regulatory Compliance"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:B.regulatory[0]})]}),(0,a.jsx)(A.A,{value:B.regulatory,onValueChange:e=>P(t=>({...t,regulatory:e})),max:100,step:5,className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(w.J,{className:"text-sm",children:"Financial Viability"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:B.financial[0]})]}),(0,a.jsx)(A.A,{value:B.financial,onValueChange:e=>P(t=>({...t,financial:e})),max:100,step:5,className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(w.J,{className:"text-sm",children:"Environmental Impact"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:B.environmental[0]})]}),(0,a.jsx)(A.A,{value:B.environmental,onValueChange:e=>P(t=>({...t,environmental:e})),max:100,step:5,className:"w-full"})]})]}),(0,a.jsx)(S.w,{}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-[hsl(var(--primary))]",children:ep}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Overall TRUFA Score"})]})]})]}),(0,a.jsxs)(y.Zp,{children:[(0,a.jsxs)(y.aR,{children:[(0,a.jsx)(y.ZB,{children:"Validation Decision"}),(0,a.jsx)(y.BT,{children:"Approve or reject this submission"})]}),(0,a.jsxs)(y.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,a.jsxs)(b.$,{variant:!1===H?"destructive":"outline",size:"lg",onClick:()=>Y(!1),className:"flex-1",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Reject"]}),(0,a.jsxs)(b.$,{variant:!0===H?"default":"outline",size:"lg",onClick:()=>Y(!0),className:"flex-1",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Approve"]})]}),null!==H&&(0,a.jsxs)(E.Fc,{className:H?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)(E.TN,{children:H?"Device approved for certification. Ready to sign and submit to Stellar.":"Device rejected. This decision will be recorded on-chain."})]})]})]}),(0,a.jsxs)(y.Zp,{children:[(0,a.jsxs)(y.aR,{children:[(0,a.jsx)(y.ZB,{children:"Wallet Status"}),(0,a.jsx)(y.BT,{children:"Admin wallet connection and signing"})]}),(0,a.jsxs)(y.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Connection Status"}),(0,a.jsx)(N.E,{variant:ed?"default":"secondary",children:ed?"Connected":"Disconnected"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Admin Status"}),(0,a.jsx)(N.E,{variant:em?"default":"secondary",children:em?"Admin":"Not Admin"})]}),eh&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:[eh.slice(0,8),"...",eh.slice(-8)]})]}),(0,a.jsx)(b.$,{onClick:ev,disabled:!eN,className:"w-full",size:"lg",children:z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Sign & Submit to Stellar"]})}),!ed&&(0,a.jsxs)(E.Fc,{children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)(E.TN,{children:"Please connect an admin wallet to sign and submit this validation."})]}),ed&&!em&&(0,a.jsxs)(E.Fc,{variant:"destructive",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)(E.TN,{children:"Connected wallet is not authorized as an admin. Please connect an admin wallet."})]})]})]}),K&&(0,a.jsxs)(y.Zp,{children:[(0,a.jsxs)(y.aR,{children:[(0,a.jsx)(y.ZB,{children:"Transaction Status"}),(0,a.jsx)(y.BT,{children:"Stellar blockchain transaction details"})]}),(0,a.jsxs)(y.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w.J,{className:"text-sm",children:"Transaction Hash"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"text-xs bg-muted px-2 py-1 rounded flex-1 truncate",children:es}),(0,a.jsx)(b.$,{variant:"ghost",size:"sm",onClick:ej,className:"shrink-0",children:ei?(0,a.jsx)(p.A,{className:"h-4 w-4"}):(0,a.jsx)(v.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Status"}),(0,a.jsx)(N.E,{variant:"confirmed"===er?"default":"secondary",children:"confirmed"===er?"Confirmed":"Pending"})]}),(0,a.jsx)(b.$,{variant:"outline",className:"w-full",asChild:!0,children:(0,a.jsxs)("a",{href:"https://stellar.expert/explorer/testnet/tx/".concat(es),target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"View on Stellar Expert"]})}),"confirmed"===er&&(0,a.jsxs)(b.$,{variant:"outline",className:"w-full",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Download Certificate"]})]})]})]})]})})]})}},5687:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(1918),r=s(7839);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},6490:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>o,TN:()=>c});var a=s(2507),r=s(3643),n=s(144),i=s(5687);let l=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:r}),s),...n})});o.displayName="Alert",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...r})});c.displayName="AlertDescription"},8248:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(2507),r=s(3643),n=s(849),i=s(144),l=s(5687);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:r,size:i,className:s})),ref:t,...d})});c.displayName="Button"},8381:(e,t,s)=>{"use strict";s.d(t,{w:()=>l});var a=s(2507),r=s(3643),n=s(3747),i=s(5687);let l=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:l=!0,...o}=e;return(0,a.jsx)(n.b,{ref:t,decorative:l,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...o})});l.displayName=n.b.displayName},9251:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(2507),r=s(3643),n=s(1592),i=s(5687);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(n.bL,{ref:t,className:(0,i.cn)("relative flex w-full touch-none select-none items-center",s),...r,children:[(0,a.jsx)(n.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(n.Q6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(n.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});l.displayName=n.bL.displayName},9668:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(3643);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[799,387,22,157,341,716,860,358],()=>t(1516)),_N_E=e.O()}]);